<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" type="text/css" href="{{url_for('static', filename = 'css/bootstrap.css')}}">
  <link rel="stylesheet" type="text/css" href="{{url_for('static', filename = 'css/sidebars.css')}}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous">
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"
    integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous">
  </script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"
    integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous">
  </script>
  <script src="https://kit.fontawesome.com/999ca2bb93.js" crossorigin="anonymous"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

  <title>{% block title %}{% endblock %}</title>

  {% block style %}{% endblock %}
</head>

<body onload="startTime()">
  <!-- NEW -->
  <div class="sidebar">
  <div class="sidebar_content">
    <div class="flex-shrink-0 p-3 bg-dark" style="width: 280px;">
      <a href="/" class="d-flex align-items-center pb-3 mb-3 link-light text-decoration-none border-bottom">
        <svg class="bi me-2" width="30" height="24">
          <use xlink:href="#bootstrap" /></svg>
        <span class="fs-5 fw-semibold text-white">My Life</span>
      </a>
      <ul class="list-unstyled ps-0">
        {% if user.is_authenticated %}
        <li class="mb-1">
          <button class="btn btn-outline-light btn-toggle align-items-center rounded collapsed text-info"
            data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true">
            Home
          </button>
          <div class="collapse" id="home-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ">
              <li><a href="/home" class="link-light rounded">Home</a></li>
            </ul>
          </div>
        </li>
        <li class="mb-1">
          <button class="btn btn-outline-light btn-toggle align-items-center rounded collapsed text-info"
            data-bs-toggle="collapse" data-bs-target="#menu-collapse" aria-expanded="true">
            Menu
          </button>
          <div class="collapse" id="menu-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ">
              <li><a href="/menu" class="link-light rounded">Menu</a></li>
              <li><a href="/menu/recipe" class="link-light rounded">Recipe</a></li>
              <li><a href="/menu/shopping" class="link-light rounded">Shopping List</a></li>
            </ul>
          </div>
        </li>
        <li class="mb-1">
          <button class="btn btn-outline-light btn-toggle align-items-center rounded collapsed text-info"
            data-bs-toggle="collapse" data-bs-target="#health-collapse" aria-expanded="true">
            Health
          </button>
          <div class="collapse" id="health-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ">
              <li><a href="/health/facilities" class="link-light rounded">Facilities</a></li>
              <li><a href="/health/doctors" class="link-light rounded">Doctors</a></li>
              <li><a href="/health/medications" class="link-light rounded">Medications</a></li>
              <li><a href="/health//medlist" class="link-light rounded">Medication List</a></li>
              <li><a href="/health/hospital" class="link-light rounded">Hospitalizations</a></li>
              <li><a href="/health/allergies" class="link-light rounded">Allergies</a></li>
              <li><a href="/health/surgeries" class="link-light rounded">Surgeries</a></li>
              <li><a href="/health/a1c" class="link-light rounded">A1C</a></li>
              <li><a href="/health/cpap" class="link-light rounded">CPAP Supplies</a></li>
              <li><a href="https://mychart.salemhealth.org/mychart/Authentication/Login?" target="_blank"
                  class="link-light rounded">Salem Health MyChart</a></li>
            </ul>
          </div>
        </li>
        <li class="mb-1">
          <button class="btn btn-outline-light btn-toggle align-items-center rounded collapsed text-info"
            data-bs-toggle="collapse" data-bs-target="#prod-collapse" aria-expanded="true">
            Productivity
          </button>
          <div class="collapse" id="prod-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ">
              <li><a href="/productivity/goals" class="link-light rounded">Goals</a></li>
              <li><a href="/productivity/projects" class="link-light rounded">Projects</a></li>
              <li><a href="/productivity/tasks" class="link-light rounded">Tasks</a></li>
            </ul>
          </div>
        </li>
        <li class="mb-1">
          <button class="btn btn-outline-light btn-toggle align-items-center rounded collapsed text-info"
            data-bs-toggle="collapse" data-bs-target="#personal-collapse" aria-expanded="true">
            Personal
          </button>
          <div class="collapse" id="personal-collapse">
            <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small ">
              <li><a href="/vehicle/vehicle" class="link-light rounded">Cars</a></li>
              <li><a href="/personal/wifi" class="link-light rounded">Wifi</a></li>
              <li><a href="/personal/housinghistory" class="link-light rounded">Housing History</a></li>
            </ul>
          </div>
        </li>
      </ul>
    </div>
  </div>
  <div class="footer">
    <div class="dropdown">
      <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1"
        data-bs-toggle="dropdown" aria-expanded="false">
        {% set fn = 'images/'+current_user.avatar_filename %}
        <img src="{{url_for('static', filename=fn)}}" alt="pic" width="64" height="64" class="rounded-circle me-2">
        <strong>{{current_user.username}}</strong>
      </a>
      <ul class="dropdown-menu dropdown-menu-dark text-small shadow" aria-labelledby="dropdownUser1">
        <li><a class="dropdown-item" href="/profile">Profile</a></li>
        <li><a class="dropdown-item" href="/settings">Settings</a></li>
        <li>
          <hr class="dropdown-divider">
        </li>
        <li><a class="dropdown-item" href="/logout">Sign out</a></li>
      </ul>
      {% else %}
      <li><a class="nav-item nav-link" href="/login">Login</a></li>
      <li><a class="nav-item nav-link" href="/sign-up">Sign Up</a></li>
      {% endif %}
    </div>
    <div id="clockdate">
      <div class="clockdate-wrapper d-inline-flex">
        <div id="date"></div>
      </div>
    </div>
  </div>
  </div>
  {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
  {% for category, message in messages %}
  {% if category == 'error' %}
  <div class="alert alert-danger alter-dismissable fade show main" role="alert">
    {{ message }}
    <button type="button" class="close" data-dismiss="alert">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  {% else %}
  <div class="alert alert-success alter-dismissable fade show main" role="alert">
    {{ message }}
    <button type="button" class="btn btn-outline-dark" data-dismiss="alert">
      <span aria-hidden="false"><i class="fas fa-window-close"></i></span>
    </button>
  </div>
  {% endif %}
  {% endfor %}
  {% endif %}
  {% endwith %}
  <div class="d-flex flex-column flex-shrink-0 p-3 bg-light">
    <div id="submenu" class="main">
      {% block submenu %}{% endblock %}
    </div>
    <main class="main">
      {% block content %}
      {% endblock %}
    </main>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous">
  </script>
  <script>
    function startTime() {
      var today = new Date();
      var hr = today.getHours();
      var min = today.getMinutes();
      var sec = today.getSeconds();
      ap = (hr < 12) ? "<span>AM</span>" : "<span>PM</span>";
      hr = (hr == 0) ? 12 : hr;
      hr = (hr > 12) ? hr - 12 : hr;
      //Add a zero in front of numbers<10
      hr = checkTime(hr);
      min = checkTime(min);
      sec = checkTime(sec);

      var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sept', 'Oct', 'Nov', 'Dec'];
      var days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      var curWeekDay = days[today.getDay()];
      var curDay = today.getDate();
      var curMonth = months[today.getMonth()];
      var curYear = today.getFullYear();
      date = curWeekDay + ", " + curMonth + " " + curDay + " " + curYear + " - " + hr + ":" + min + " " + ap
      document.getElementById("date").innerHTML = date;

      time = hr + ":" + min + ":" + sec + " " + ap
      document.getElementById("clock").innerHTML = time;

      var time = setTimeout(function () {
        startTime()
      }, 500);
    }

    function checkTime(i) {
      if (i < 10) {
        i = "0" + i;
      }
      return i;
    }
  </script>
</body>

</html>